{"version":3,"sources":["@wordpress/components/src/flex/flex/hook.js"],"names":["css","useMemo","deprecated","useContextSystem","useResponsiveValue","space","styles","useCx","rtl","useDeprecatedProps","isReversed","otherProps","alternative","since","direction","useFlex","props","align","className","directionProp","expanded","gap","justify","wrap","directionAsArray","Array","isArray","isColumn","includes","isReverse","cx","rtlWatchResult","watch","classes","sx","Base","alignItems","flexDirection","flexWrap","undefined","justifyContent","height","width","marginBottom","Items","marginLeft","marginRight","WrapItems","Flex","ItemsColumn","ItemsRow"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { css } from '@emotion/react';\n\n/**\n * WordPress dependencies\n */\nimport { useMemo } from '@wordpress/element';\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Internal dependencies\n */\nimport { useContextSystem } from '../../ui/context';\nimport { useResponsiveValue } from '../../ui/utils/use-responsive-value';\nimport { space } from '../../ui/utils/space';\nimport * as styles from '../styles';\nimport { useCx, rtl } from '../../utils';\n\n/**\n *\n * @param {import('../../ui/context').WordPressComponentProps<import('../types').FlexProps, 'div'>} props\n * @return {import('../../ui/context').WordPressComponentProps<import('../types').FlexProps, 'div'>} Props with the deprecated props removed.\n */\nfunction useDeprecatedProps( { isReversed, ...otherProps } ) {\n\tif ( typeof isReversed !== 'undefined' ) {\n\t\tdeprecated( 'Flex isReversed', {\n\t\t\talternative: 'Flex direction=\"row-reverse\" or \"column-reverse\"',\n\t\t\tsince: '5.9',\n\t\t} );\n\t\treturn {\n\t\t\t...otherProps,\n\t\t\tdirection: isReversed ? 'row-reverse' : 'row',\n\t\t};\n\t}\n\n\treturn otherProps;\n}\n\n/**\n * @param {import('../../ui/context').WordPressComponentProps<import('../types').FlexProps, 'div'>} props\n */\nexport function useFlex( props ) {\n\tconst {\n\t\talign = 'center',\n\t\tclassName,\n\t\tdirection: directionProp = 'row',\n\t\texpanded = true,\n\t\tgap = 2,\n\t\tjustify = 'space-between',\n\t\twrap = false,\n\t\t...otherProps\n\t} = useContextSystem( useDeprecatedProps( props ), 'Flex' );\n\n\tconst directionAsArray = Array.isArray( directionProp )\n\t\t? directionProp\n\t\t: [ directionProp ];\n\tconst direction = useResponsiveValue( directionAsArray );\n\n\tconst isColumn =\n\t\ttypeof direction === 'string' && !! direction.includes( 'column' );\n\tconst isReverse =\n\t\ttypeof direction === 'string' && direction.includes( 'reverse' );\n\n\tconst cx = useCx();\n\tconst rtlWatchResult = rtl.watch();\n\n\tconst classes = useMemo( () => {\n\t\tconst sx = {};\n\n\t\tsx.Base = css( {\n\t\t\talignItems: isColumn ? 'normal' : align,\n\t\t\tflexDirection: direction,\n\t\t\tflexWrap: wrap ? 'wrap' : undefined,\n\t\t\tjustifyContent: justify,\n\t\t\theight: isColumn && expanded ? '100%' : undefined,\n\t\t\twidth: ! isColumn && expanded ? '100%' : undefined,\n\t\t\tmarginBottom: wrap ? `calc(${ space( gap ) } * -1)` : undefined,\n\t\t} );\n\n\t\t/**\n\t\t * Workaround to optimize DOM rendering.\n\t\t * We'll enhance alignment with naive parent flex assumptions.\n\t\t *\n\t\t * Trade-off:\n\t\t * Far less DOM less. However, UI rendering is not as reliable.\n\t\t */\n\t\tsx.Items = css`\n\t\t\t> * + *:not( marquee ) {\n\t\t\t\tmargin-top: ${ isColumn ? space( gap ) : undefined };\n\t\t\t\t${ rtl( {\n\t\t\t\t\tmarginLeft:\n\t\t\t\t\t\t! isColumn && ! isReverse ? space( gap ) : undefined,\n\t\t\t\t\tmarginRight:\n\t\t\t\t\t\t! isColumn && isReverse ? space( gap ) : undefined,\n\t\t\t\t} )() }\n\t\t\t}\n\t\t`;\n\n\t\tsx.WrapItems = css`\n\t\t\t> *:not( marquee ) {\n\t\t\t\tmargin-bottom: ${ space( gap ) };\n\t\t\t\t${ rtl( {\n\t\t\t\t\tmarginLeft:\n\t\t\t\t\t\t! isColumn && isReverse ? space( gap ) : undefined,\n\t\t\t\t\tmarginRight:\n\t\t\t\t\t\t! isColumn && ! isReverse ? space( gap ) : undefined,\n\t\t\t\t} )() }\n\t\t\t}\n\n\t\t\t> *:last-child:not( marquee ) {\n\t\t\t\t${ rtl( {\n\t\t\t\t\tmarginLeft: ! isColumn && isReverse ? 0 : undefined,\n\t\t\t\t\tmarginRight: ! isColumn && ! isReverse ? 0 : undefined,\n\t\t\t\t} )() }\n\t\t\t}\n\t\t`;\n\n\t\treturn cx(\n\t\t\tstyles.Flex,\n\t\t\tsx.Base,\n\t\t\twrap ? sx.WrapItems : sx.Items,\n\t\t\tisColumn ? styles.ItemsColumn : styles.ItemsRow,\n\t\t\tclassName\n\t\t);\n\t\t// rtlWatchResult is needed to refresh styles when the writing direction changes\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [\n\t\talign,\n\t\tclassName,\n\t\tcx,\n\t\tdirection,\n\t\texpanded,\n\t\tgap,\n\t\tisColumn,\n\t\tisReverse,\n\t\tjustify,\n\t\twrap,\n\t\trtlWatchResult,\n\t] );\n\n\treturn { ...otherProps, className: classes, isColumn };\n}\n"]}